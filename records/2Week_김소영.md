## Title: [2Week] 김소영

### 미션 요구사항 분석 & 체크리스트

---
#### 필수 요구사항
- 사용자가 호감 등록을 시도했을 경우 다음 세 가지의 처리를 한다. 
  - 현재 사용자가 호감 표시를 한 인원이 10명을 초과했을 경우 새로 호감 등록을 할 수 없다.
  - 이미 등록된 사용자를 동일한 유형으로 호감 등록을 시도했을 경우 중복으로 호감 등록을 할 수 없다.
  - 이미 등록된 사용자이나 다른 유형으로 호감 등록을 시도했을 경우 새로 등록이 아닌 업데이트가 되게끔 한다.

#### 체크리스트
- [x] 특정 frominstamemberid를 검색했을 때 그 id가 표시되어 있는 likeableperson 데이터의 Count를 확인할 수 있도록 한다.
- [x] 호감 등록 시도 시 등록자의 id와 상대방의 username을 동시에 검색할 수 있도록 한다. 
- [x] ㄴ attributetypecode를 비교하여 값이 같을 경우와 다를 경우 다른 처리가 되도록 한다.

### 2주차 미션 요약

---

**[접근 방법]**

- Repository에 특정 조건의 카운트를 받아오는 메소드를 선언한다.
  - 이전에 작성된 메소드들을 참고.
  - 명명법을 이용하여 메소드를 선언해주었다. ([참고 사이트](https://zara49.tistory.com/130))
  - **findByFromInstaMemberIdAndToInstaMemberUsername()과 countByFromInstaMemberId()가 각각 정상 동작하는 것을 확인.**
- attributeTypeCode가 상이할 경우 db를 업데이트 시킨다.
  - LikeablePerson Entity중 변경이 일어나는 attributeTypeCode에 setter를 정의하고 필요 시 사용하도록 한다.
  - **추가에 실패한 경우 아무런 동작이 일어나지 않고 호감 등록 창으로 다시 돌아오는 것을 확인.**
  - **수정에 성공한 경우 성공값을 반환하고 변경된 것을 확인.**


**[특이사항]**

구현 과정에서 아쉬웠던 점 / 궁금했던 점을 정리합니다.

  **참고: [Refactoring]**

#### 예정
  - 프론트엔드 정리 예정

#### 구현 중 어려웠던 점/궁금한 점
  - update 구문의 경우 DDL 언어로 Repository에서 명명법으로 사용할 수 없어 직접 메소드에서 쿼리문을 실행하는 방식을 시도하였으나 hiberate 에러로 쿼리 생성에 문제가 생겨 실패하였다.
    - Entity의 값을 직접 변경해주는 것이 구현도 쉽고 간편했다.
  - attributeTypeCode가 같은 데이터를 검색하는 구문에서, from/to 인스타 계정 정보를 확인하여 리스트로 뽑아둔 후 for문으로 검사하는 것과 db에 한번에 검색해서 바로 데이터를 받아오는 것 중 어떤 것이 빠른 지에 대한 의문이 들었다. 이전 본 영상에서 db에 접근하는 것은 코스트가 많이 든다는 것이 떠올라 우선 for문으로 검사할 수 있도록 구현해주었다.
  
